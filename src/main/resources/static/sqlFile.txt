-- 2024/05/21 --
-- init sqlFile edit --

CREATE TABLE customer (
	customer_code	bigint	NOT NULL,
	customer_id	varchar(30)	NOT NULL,
	customer_pw	varchar(160)	NOT NULL,
	customer_nick_name	varchar(30)	NOT NULL,
	customer_register_date DATETIME	NOT NULL,
	customer_class	varchar(50)	NOT NULL,
	address	varchar(400)	NOT NULL
);

CREATE TABLE seller (
	seller_code	bigint	NOT NULL,
	seller_id	varchar(30)	NOT NULL,
	seller_pw	varchar(160)	NOT NULL,
	seller_name	varchar(40)	NOT NULL
);

CREATE TABLE product (
	product_code	bigint	NOT NULL,
	product_name	varchar(200)	NOT NULL,
	product_price	bigint	NOT NULL	DEFAULT 0,
	product_category_code	bigint	NOT NULL,
	product_description	text	NULL,
	product_total_quantity	bigint	NULL,
	product_sold_quantity	bigint	NULL,
	product_register_date	DATETIME	NOT NULL,
	main_image_link	varchar(256)	NULL,
	thumbnail_image_link	varchar(256)	NULL,
	seller_code	bigint	NOT NULL
);

CREATE TABLE product_image_detail (
	product_image_detail_code	bigint	NOT NULL,
	detail_image_detail_link	varchar(256)	NOT NULL,
	product_code	bigint	NOT NULL
);

CREATE TABLE product_buy (
	product_buy_code	bigint	NOT NULL,
	product_buy_quantity	bigint	NOT NULL,
	product_buy_address	varchar(400)	NULL,
	product_buy_date	DATETIME	NOT NULL,
	product_buy_progress	varchar(10)	NOT NULL,
	product_buy_delivery_price	bigint	NOT NULL,
	payment_price	bigint	NOT NULL,
	product_buy_discount_all	bigint	NULL,
	member_coupon_code	bigint	NOT NULL,
	product_code	bigint	NOT NULL,
	customer_code	bigint	NOT NULL
);

CREATE TABLE address (
	address_code	bigint	NOT NULL,
	address	varchar(400)	NOT NULL
);

CREATE TABLE product_review (
	product_review_code	bigint	NOT NULL,
	product_review_title	varchar(100)	NULL,
	product_review_content	varchar(4000)	NULL,
	product_review_image	varchar(100)	NULL,
	product_review_star	bigint	NOT NULL,
	product_review_date	DATETIME	NOT NULL,
	product_review_reply	varchar(4000)	NULL,
	product_review_reply_date	DATETIME	NULL	DEFAULT now(),
	product_name	varchar(200)	NOT NULL,
	product_review_count	bigint	NOT NULL	DEFAULT 0,
	product_review_up_count	bigint	NULL	DEFAULT 0,
	product_review_view_count	bigint	NULL	DEFAULT 0,
	customer_id	varchar(30)	NOT NULL,
	customer_code	bigint	NOT NULL
);

CREATE TABLE admin (
	admin_id	varchar(100)	NOT NULL,
	admin_password	varchar(100)	NOT NULL
);

CREATE TABLE member_coupon (
	member_coupon_code	bigint	NOT NULL,
	member_coupon_create_date	DATETIME	NULL	DEFAULT now(),
	member_coupon_end_date	DATETIME	NULL,
	member_coupon_use_status	BOOLEAN	NULL,
	member_coupon_use_date	DATETIME	NULL,
	customer_code	bigint	NOT NULL
);

CREATE TABLE coupon (
	coupon_code	bigint	NOT NULL,
	coupon_name	varchar(100)	NOT NULL,
	discount_amount	bigint	NULL,
	discount_percentage	bigint	NULL
);

CREATE TABLE product_pick (
	customer_code	bigint	NOT NULL,
	product_pick_quantity	bigint	NOT NULL,
	product_code	bigint	NOT NULL
);

CREATE TABLE product_qna (
	product_qna_code	bigint	NOT NULL,
	product_qna_title	varchar(100)	NOT NULL,
	product_qna_content	varchar(256)	NOT NULL,
	customer_id	varchar(30)	NOT NULL,
	product_qna_date	DATETIME	NOT NULL,
	product_qna_status	BOOLEAN	NOT NULL,
	customer_code	bigint	NOT NULL
);

CREATE TABLE product_qna_answer (
	product_qna_answer_code	bigint	NOT NULL,
	seller_name	varchar(40)	NOT NULL,
	product_qna_answer_content	VARCHAR(256)	NULL,
	customer_id	varchar(30)	NOT NULL,
	product_qna_answer_date	DATETIME	NOT NULL,
	seller_code	bigint	NOT NULL,
	product_qna_code	bigint	NOT NULL
);

CREATE TABLE product_category_detail (
	product_category_detail_code	bigint	NOT NULL,
	product_category_detail_name	varchar(50)	NOT NULL
);

CREATE TABLE product_category (
	product_category_code	bigint	NOT NULL,
	product_category_name	varchar(50)	NOT NULL,
	product_category_detail_code	bigint	NOT NULL
);

CREATE TABLE payment (
	payment_code	bigint	NOT NULL,
	payment_date	DATETIME	NOT NULL,
	payment_price	bigint	NOT NULL,
	payment_method	varchar(100)	NOT NULL,
	customer_code	bigint	NOT NULL,
	product_buy_code	bigint	NOT NULL
);

CREATE TABLE notification (
	notification_type	varchar(100)	NOT NULL,
	notification_content	varchar(200)	NOT NULL,
	notification_date	DATETIME	NOT NULL,
	customer_code	bigint	NOT NULL
);

CREATE TABLE member_point (
	member_point_code	bigint	NOT NULL,
	customer_code	bigint	NOT NULL,
	member_point_save_date	DATETIME	NOT NULL	DEFAULT now(),
	member_point_use_date	DATETIME	NOT NULL,
	member_point_type	varchar(30)	NOT NULL,
	member_point_current	bigint	NOT NULL,
	member_point_amount	bigint	NOT NULL
);

CREATE TABLE service_center_notice (
	service_center_notice_bno	bigint	NOT NULL,
	service_center_notice_title	varchar(100)	NOT NULL,
	service_center_notice_date	DATETIME	NOT NULL,
	admin_id2	varchar(100)	NOT NULL
);

CREATE TABLE service_center_inquiry (
	customer_id	varchar(30)	NOT NULL,
	service_center_inquiry_text	TEXT	NOT NULL,
	service_center_inquiry_image	varchar(256)	NOT NULL,
	service_center_inquiry_category	varchar(100)	NOT NULL,
	customer_code	bigint	NOT NULL
);

CREATE TABLE seller_pick (
	seller_pick_code	bigint	NOT NULL,
	seller_code	bigint	NOT NULL,
	customer_code	bigint	NOT NULL
);

ALTER TABLE customer ADD CONSTRAINT PK_CUSTOMER PRIMARY KEY (
	customer_code
);

ALTER TABLE seller ADD CONSTRAINT PK_SELLER PRIMARY KEY (
	seller_code
);

ALTER TABLE product ADD CONSTRAINT PK_PRODUCT PRIMARY KEY (
	product_code
);

ALTER TABLE product_image_detail ADD CONSTRAINT PK_PRODUCT_IMAGE_DETAIL PRIMARY KEY (
	product_image_detail_code
);

ALTER TABLE product_buy ADD CONSTRAINT PK_PRODUCT_BUY PRIMARY KEY (
	product_buy_code
);

ALTER TABLE address ADD CONSTRAINT PK_ADDRESS PRIMARY KEY (
	address_code
);

ALTER TABLE product_review ADD CONSTRAINT PK_PRODUCT_REVIEW PRIMARY KEY (
	product_review_code
);

ALTER TABLE admin ADD CONSTRAINT PK_ADMIN PRIMARY KEY (
	admin_id
);

ALTER TABLE member_coupon ADD CONSTRAINT PK_MEMBER_COUPON PRIMARY KEY (
	member_coupon_code
);

ALTER TABLE coupon ADD CONSTRAINT PK_COUPON PRIMARY KEY (
	coupon_code
);

ALTER TABLE product_qna ADD CONSTRAINT PK_PRODUCT_QNA PRIMARY KEY (
	product_qna_code
);

ALTER TABLE product_qna_answer ADD CONSTRAINT PK_PRODUCT_QNA_ANSWER PRIMARY KEY (
	product_qna_answer_code
);

ALTER TABLE product_category_detail ADD CONSTRAINT PK_PRODUCT_CATEGORY_DETAIL PRIMARY KEY (
	product_category_detail_code
);

ALTER TABLE product_category ADD CONSTRAINT PK_PRODUCT_CATEGORY PRIMARY KEY (
	product_category_code
);

ALTER TABLE payment ADD CONSTRAINT PK_PAYMENT PRIMARY KEY (
	payment_code
);

ALTER TABLE member_point ADD CONSTRAINT PK_MEMBER_POINT PRIMARY KEY (
	member_point_code
);

ALTER TABLE service_center_notice ADD CONSTRAINT PK_SERVICE_CENTER_NOTICE PRIMARY KEY (
	service_center_notice_bno
);

ALTER TABLE service_center_inquiry ADD CONSTRAINT PK_SERVICE_CENTER_INQUIRY PRIMARY KEY (
	customer_id
);

ALTER TABLE seller_pick ADD CONSTRAINT PK_SELLER_PICK PRIMARY KEY (
	seller_pick_code
);

ALTER TABLE product ADD CONSTRAINT FK_product_category_TO_product_1 FOREIGN KEY (
	product_category_code
)
REFERENCES product_category (
	product_category_code
);

ALTER TABLE product ADD CONSTRAINT FK_seller_TO_product_1 FOREIGN KEY (
	seller_code
)
REFERENCES seller (
	seller_code
);

ALTER TABLE product_image_detail ADD CONSTRAINT FK_product_TO_product_image_detail_1 FOREIGN KEY (
	product_code
)
REFERENCES product (
	product_code
);

ALTER TABLE product_buy ADD CONSTRAINT FK_member_coupon_TO_product_buy_1 FOREIGN KEY (
	member_coupon_code
)
REFERENCES member_coupon (
	member_coupon_code
);

ALTER TABLE product_buy ADD CONSTRAINT FK_product_TO_product_buy_1 FOREIGN KEY (
	product_code
)
REFERENCES product (
	product_code
);

ALTER TABLE product_buy ADD CONSTRAINT FK_customer_TO_product_buy_1 FOREIGN KEY (
	customer_code
)
REFERENCES customer (
	customer_code
);

ALTER TABLE product_review ADD CONSTRAINT FK_customer_TO_product_review_1 FOREIGN KEY (
	customer_code
)
REFERENCES customer (
	customer_code
);

ALTER TABLE member_coupon ADD CONSTRAINT FK_customer_TO_member_coupon_1 FOREIGN KEY (
	customer_code
)
REFERENCES customer (
	customer_code
);

ALTER TABLE product_pick ADD CONSTRAINT FK_customer_TO_product_pick_1 FOREIGN KEY (
	customer_code
)
REFERENCES customer (
	customer_code
);

ALTER TABLE product_pick ADD CONSTRAINT FK_product_TO_product_pick_1 FOREIGN KEY (
	product_code
)
REFERENCES product (
	product_code
);

ALTER TABLE product_qna ADD CONSTRAINT FK_customer_TO_product_qna_1 FOREIGN KEY (
	customer_code
)
REFERENCES customer (
	customer_code
);

ALTER TABLE product_qna_answer ADD CONSTRAINT FK_seller_TO_product_qna_answer_1 FOREIGN KEY (
	seller_code
)
REFERENCES seller (
	seller_code
);

ALTER TABLE product_qna_answer ADD CONSTRAINT FK_product_qna_TO_product_qna_answer_1 FOREIGN KEY (
	product_qna_code
)
REFERENCES product_qna (
	product_qna_code
);

ALTER TABLE product_category ADD CONSTRAINT FK_product_category_detail_TO_product_category_1 FOREIGN KEY (
	product_category_detail_code
)
REFERENCES product_category_detail (
	product_category_detail_code
);

ALTER TABLE payment ADD CONSTRAINT FK_customer_TO_payment_1 FOREIGN KEY (
	customer_code
)
REFERENCES customer (
	customer_code
);

ALTER TABLE payment ADD CONSTRAINT FK_product_buy_TO_payment_1 FOREIGN KEY (
	product_buy_code
)
REFERENCES product_buy (
	product_buy_code
);

ALTER TABLE notification ADD CONSTRAINT FK_customer_TO_notification_1 FOREIGN KEY (
	customer_code
)
REFERENCES customer (
	customer_code
);

ALTER TABLE member_point ADD CONSTRAINT FK_customer_TO_member_point_1 FOREIGN KEY (
	customer_code
)
REFERENCES customer (
	customer_code
);

ALTER TABLE service_center_notice ADD CONSTRAINT FK_admin_TO_service_center_notice_1 FOREIGN KEY (
	admin_id2
)
REFERENCES admin (
	admin_id
);

ALTER TABLE service_center_inquiry ADD CONSTRAINT FK_customer_TO_service_center_inquiry_1 FOREIGN KEY (
	customer_code
)
REFERENCES customer (
	customer_code
);

ALTER TABLE seller_pick ADD CONSTRAINT FK_seller_TO_seller_pick_1 FOREIGN KEY (
	seller_code
)
REFERENCES seller (
	seller_code
);

ALTER TABLE seller_pick ADD CONSTRAINT FK_customer_TO_seller_pick_1 FOREIGN KEY (
	customer_code
)
REFERENCES customer (
	customer_code
);

